# Traefik Values File
# This file contains configuration for Traefik ingress controller
# Used by: All platform components for ingress and TLS termination

# Global Configuration
globalArguments:
  - "--global.checknewversion=false"
  - "--global.sendanonymoususage=false"

# Entry Points Configuration
ports:
  web:
    port: 80
    expose: true
    exposedPort: 80
    protocol: TCP
  websecure:
    port: 443
    expose: true
    exposedPort: 443
    protocol: TCP

# Additional Arguments for ACME/Let's Encrypt
additionalArguments:
  - "--certificatesresolvers.letsencrypt.acme.email=your-email@example.com"
  - "--certificatesresolvers.letsencrypt.acme.storage=/data/acme.json"
  - "--certificatesresolvers.letsencrypt.acme.httpchallenge.entrypoint=web"
  # Use Let's Encrypt staging for testing (uncomment for staging, comment for production)
  # - "--certificatesresolvers.letsencrypt.acme.caserver=https://acme-staging-v02.api.letsencrypt.org/directory"

# Persistence for ACME certificates
persistence:
  enabled: true
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 128Mi
  path: /data
  annotations: {}

# Resources
resources:
  requests:
    cpu: 100m
    memory: 50Mi
  limits:
    cpu: 300m
    memory: 150Mi

# Service Configuration
service:
  type: LoadBalancer
  annotations: {}

# Deployment Configuration
deployment:
  replicas: 1
  podAnnotations: {}

# Security Context
securityContext:
  capabilities:
    drop: [ALL]
    add: [NET_BIND_SERVICE]
  readOnlyRootFilesystem: false
  runAsGroup: 65532
  runAsNonRoot: true
  runAsUser: 65532

# Pod Security Context
podSecurityContext:
  fsGroup: 65532

